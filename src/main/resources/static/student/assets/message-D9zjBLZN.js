import{o as s,c as d,l as i,d as J,r as z,f as K,C as O,D as Q,s as W,E as X,e as Y,j as o,a as u,w as r,F as V,v as k,M as x,k as h,n as _,u as v,t as S,p as w,q as Z,m as b,B as ee,_ as te}from"./index-BN_aPgIH.js";const ae={xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"none"};function se(L,g){return s(),d("svg",ae,g[0]||(g[0]=[i("path",{fill:"currentcolor","fill-opacity":".26","fill-rule":"evenodd",d:"m32 10.69 26.248 15.155v22.31L32 63.308 5.75 48.155v-22.31zM9.75 30.464v15.381L32 58.69l22.248-12.845V30.464L32 43.309zM52.248 27 40.66 33.69l-8.66-5-8.66 5L11.75 27 32 15.31zM27.34 36 32 38.69 36.66 36 32 33.31zM30 8V0h4v8zM44.268 10.751l4-6.928 3.464 2-4 6.928zM16.268 12.751l-4-6.928 3.464-2 4 6.928z","clip-rule":"evenodd"},null,-1)]))}const ne={render:se},le={class:"secondary-notification"},oe={class:"msg-date"},re={class:"msg-action"},ue=["onClick"],de={key:1,class:"secondary-msg-list__empty-list"},ie=J({__name:"message",setup(L){const g=[{label:"全部通知",value:"allMsg"},{label:"未读通知",value:"unreadMsg"},{label:"已读通知",value:"readMsg"}],a=z("allMsg"),B=K(),C=O(),{allMsg:I,unreadMsg:N,readMsg:T}=Q(C),m=z(1),f=z(5),U=e=>{console.log("page-size:",e),x.success(`pageSize变化为${e}`)},D=(e,t)=>{x.success(`转到第${e}页`),console.log(t)},$=e=>{console.log(e)},c=W(()=>a.value==="allMsg"?I.value.list:a.value==="unreadMsg"?N.value.list:a.value==="readMsg"?T.value.list:[]),E=e=>{e.id&&(ee.read(e.id).then(t=>{const p=c.value.findIndex(M=>M.id===e.id);c.value.splice(p,1),B.messageCountSub(1)}),y())},y=async()=>{let e;a.value==="unreadMsg"&&(e=0),a.value==="readMsg"&&(e=1),await C.getMessage(a.value,{pageIndex:m.value,pageSize:f.value,readed:e})};return X(a,(e,t)=>{e!==t&&y()}),Y(async()=>{await y()}),(e,t)=>{const p=o("t-tag"),M=o("t-icon"),R=o("t-tooltip"),q=o("t-list-item"),A=o("t-list"),F=o("t-tab-panel"),P=o("t-tabs"),j=o("t-pagination");return s(),d("div",null,[i("div",le,[u(P,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=n=>a.value=n)},{default:r(()=>[(s(),d(V,null,k(g,(n,G)=>u(F,{key:G,value:n.value,label:n.label},{default:r(()=>[c.value.length>0?(s(),h(A,{key:0,class:"secondary-msg-list",split:!0},{default:r(()=>[(s(!0),d(V,null,k(c.value,(l,H)=>(s(),h(q,{key:H},{action:r(()=>[i("span",oe,_(l.createTime),1),i("div",re,[u(R,{class:"set-read-icon","overlay-style":{margin:"6px"},content:l.readed?v(S)("pages.detailSecondary.setRead"):v(S)("pages.detailSecondary.setUnread")},{default:r(()=>[l.readed?w("",!0):(s(),d("span",{key:0,class:"msg-action-icon",onClick:ce=>E(l)},[u(M,{name:"queue",size:"16px"})],8,ue))]),_:2},1032,["content"])])]),default:r(()=>[i("p",{class:Z(["content",{unread:!l.readed}])},[l.readed?w("",!0):(s(),h(p,{key:0,theme:"danger"},{default:r(()=>t[3]||(t[3]=[b("未读通知")])),_:1})),u(p,{size:"medium",theme:"warning",variant:"light"},{default:r(()=>[b(_(l.title),1)]),_:2},1024),b(" "+_(l.content),1)],2)]),_:2},1024))),128))]),_:1})):(s(),d("div",de,[u(v(ne)),i("p",null,_(v(S)("pages.detailSecondary.empty")),1)]))]),_:2},1032,["value","label"])),64))]),_:1},8,["modelValue"]),u(j,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=n=>m.value=n),"page-size":f.value,"onUpdate:pageSize":t[2]||(t[2]=n=>f.value=n),total:c.value.length,onChange:$,onPageSizeChange:U,onCurrentChange:D},null,8,["modelValue","page-size","total"])])])}}}),pe=te(ie,[["__scopeId","data-v-a4b33b3a"]]);export{pe as default};

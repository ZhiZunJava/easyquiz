import{e as L}from"./examPaperAnswer-BO6Ie7rU.js";import{d as O,y as M,s as d,r as c,e as U,j as n,o as m,c as w,a,w as o,m as v,F as R,v as $,n as G,u as H,t as J,l as Q,k as x,p as W,A as X,z as Y,_ as Z}from"./index-BN_aPgIH.js";import{u as ee}from"./enumitem-C4DHP3Rz.js";import{p as te}from"./pending-filled-MLL95n8b.js";const ae={class:"list-common-table"},oe={class:"table-container"},ne="id",le="top",se=!0,ue=O({__name:"index",setup(re){const p=M(),r=ee(),C=d(()=>r.exam.examPaper.paperTypeEnum),j=d(()=>r.exam.examPaperAnswer.statusEnum),k=d(()=>r.exam.examPaperAnswer.statusTag),u=c({paperType:1,subjectId:void 0}),h=c([]),K=c(0),_=c(!1),y=c(),b=d(()=>p.subjects),S=[{title:"ID",colKey:"id",width:100},{title:"试卷学科名称",colKey:"subjectId",width:150,cell:(t,{row:e})=>p.subjectEnumFormat(b.value,String(e.subjectId))},{title:"试卷标题",colKey:"paperName",ellipsis:{theme:"light"}},{title:"试卷类型",colKey:"paperType",width:150,cell:(t,{row:e})=>r.enumFormat(C.value,e.paperType)},{title:"试卷总分",colKey:"paperScore",width:80},{title:"系统判分",colKey:"systemScore",width:80},{title:"最终得分",colKey:"userScore",width:80},{title:"试卷题数",colKey:"questionCount",width:80},{title:"正确题数",colKey:"questionCorrect",width:80},{title:"操作时间",colKey:"createTime",width:200},{title:"试卷状态",colKey:"status",width:150,cell:(t,{row:e})=>a(n("t-tag"),{shape:"round",theme:r.enumFormat(k.value,e.status),variant:"light-outline"},{default:()=>[e.status===2?a(X,null,null):a(te,null,null),r.enumFormat(j.value,e.status)]})},{align:"left",fixed:"right",width:160,colKey:"op",title:"操作"}],E=t=>{const e=Y.resolve({path:"/read",query:{id:t}});window.open(e.href,"_blank")},l=c({defaultPageSize:20,total:100,defaultCurrent:1}),I=t=>{var e;(e=t.pagination)!=null&&e.current&&(l.value.defaultCurrent=t.pagination.current,i())},i=async()=>{_.value=!0;try{const t={...u.value,pageIndex:l.value.defaultCurrent,pageSize:l.value.defaultPageSize};Object.keys(t).forEach(e=>{t[e]===""&&(t[e]=null)}),await L.pageList(t).then(e=>{h.value=e.list,K.value=e.total,l.value={...l.value,total:e.total}})}catch(t){console.log(t)}finally{_.value=!1}},T=()=>{Object.keys(u.value).forEach(t=>{u.value[t]===""&&(u.value[t]=null)}),l.value.defaultCurrent=1,i()},F=()=>{l.value.defaultCurrent=1,i()};return U(()=>{p.initSubject(()=>{y.value=b.value}),i()}),(t,e)=>{const N=n("t-option"),V=n("t-select"),q=n("t-form-item"),f=n("t-col"),g=n("t-row"),D=n("t-button"),P=n("t-form"),A=n("t-link"),z=n("t-space"),B=n("t-table");return m(),w("div",ae,[a(P,{ref:"form",data:u.value,"label-width":80,colon:"",onReset:F,onSubmit:T},{default:o(()=>[a(g,null,{default:o(()=>[a(f,{span:10},{default:o(()=>[a(g,{gutter:[24,24]},{default:o(()=>[a(f,{span:4},{default:o(()=>[a(q,{label:"题目学科",name:"subjectId"},{default:o(()=>[a(V,{modelValue:u.value.subjectId,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value.subjectId=s),class:"form-item-content",placeholder:"请选择题目学科",clearable:""},{default:o(()=>[e[1]||(e[1]=v(" > ")),(m(!0),w(R,null,$(y.value,s=>(m(),x(N,{key:s.id,label:s.name,value:Number(s.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(f,{span:2,class:"operation-container"},{default:o(()=>[a(D,{theme:"primary",type:"submit"},{default:o(()=>[v(G(H(J)("components.commonTable.query")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),Q("div",oe,[a(B,{data:h.value,columns:S,"row-key":ne,"vertical-align":le,hover:se,pagination:l.value,loading:_.value,onChange:I},{op:o(s=>[a(z,null,{default:o(()=>[s.row.status===2?(m(),x(A,{key:0,theme:"primary",onClick:ce=>E(s.row.id)},{default:o(()=>e[2]||(e[2]=[v(" 查看试卷 ")])),_:2},1032,["onClick"])):W("",!0)]),_:2},1024)]),_:1},8,["data","pagination","loading"])])])}}}),_e=Z(ue,[["__scopeId","data-v-3bb02268"]]);export{_e as default};

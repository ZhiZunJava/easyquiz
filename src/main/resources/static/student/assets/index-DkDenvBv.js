import{e as O}from"./examPaper-Cs26uEvk.js";import{d as U,y as M,s as k,r,e as A,j as n,o as c,c as f,a,w as l,m as p,F as I,v as S,n as R,u as $,t as G,l as H,z as J,k as T,_ as Q}from"./index-BN_aPgIH.js";import{u as W}from"./enumitem-C4DHP3Rz.js";const X={class:"list-common-table"},Y={class:"table-container"},Z="id",ee="top",te=!0,ae=U({__name:"index",setup(le){const m=M(),v=W(),y=k(()=>v.exam.examPaper.paperTypeEnum),u=r({paperType:1,subjectId:void 0}),b=r([]),E=r(0),_=r(!1),g=r(),h=k(()=>m.subjects),K=[{title:"ID",colKey:"id",width:100},{title:"试卷学科名称",colKey:"subjectId",width:150,cell:(t,{row:e})=>m.subjectEnumFormat(h.value,String(e.subjectId))},{title:"试卷标题",colKey:"name",ellipsis:{theme:"light"}},{title:"试卷类型",colKey:"paperType",width:150,cell:(t,{row:e})=>v.enumFormat(y.value,e.paperType)},{title:"试卷分数",colKey:"scoreStr",width:80},{title:"试卷题数",colKey:"questionCount",width:80},{title:"操作时间",colKey:"createTime",width:200},{align:"left",fixed:"right",width:160,colKey:"op",title:"操作"}],V=t=>{J.push({path:"/do",query:{id:t}})},s=r({defaultPageSize:20,total:100,defaultCurrent:1}),D=t=>{var e;(e=t.pagination)!=null&&e.current&&(s.value.defaultCurrent=t.pagination.current,i())},i=async()=>{_.value=!0;try{const t={...u.value,pageIndex:s.value.defaultCurrent,pageSize:s.value.defaultPageSize};Object.keys(t).forEach(e=>{t[e]===""&&(t[e]=null)}),await O.pageList(t).then(e=>{b.value=e.list,E.value=e.total,s.value={...s.value,total:e.total}})}catch(t){console.log(t)}finally{_.value=!1}},q=()=>{Object.keys(u.value).forEach(t=>{u.value[t]===""&&(u.value[t]=null)}),s.value.defaultCurrent=1,i()},F=()=>{s.value.defaultCurrent=1,i()};return A(()=>{m.initSubject(()=>{g.value=h.value}),i()}),(t,e)=>{const w=n("t-option"),x=n("t-select"),j=n("t-form-item"),d=n("t-col"),C=n("t-row"),N=n("t-button"),P=n("t-form"),z=n("t-link"),B=n("t-space"),L=n("t-table");return c(),f("div",X,[a(P,{ref:"form",data:u.value,"label-width":80,colon:"",onReset:F,onSubmit:q},{default:l(()=>[a(C,null,{default:l(()=>[a(d,{span:10},{default:l(()=>[a(C,{gutter:[24,24]},{default:l(()=>[a(d,{span:4},{default:l(()=>[a(j,{label:"试卷类型",name:"paperType"},{default:l(()=>[a(x,{modelValue:u.value.paperType,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value.paperType=o),class:"form-item-content",placeholder:"请选择试卷类型",clearable:""},{default:l(()=>[e[2]||(e[2]=p(" > ")),(c(!0),f(I,null,S(y.value,o=>(c(),T(w,{key:o.key,label:o.value,value:o.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(d,{span:4},{default:l(()=>[a(j,{label:"题目学科",name:"subjectId"},{default:l(()=>[a(x,{modelValue:u.value.subjectId,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value.subjectId=o),class:"form-item-content",placeholder:"请选择题目学科",clearable:""},{default:l(()=>[e[3]||(e[3]=p(" > ")),(c(!0),f(I,null,S(g.value,o=>(c(),T(w,{key:o.id,label:o.name,value:Number(o.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(d,{span:2,class:"operation-container"},{default:l(()=>[a(N,{theme:"primary",type:"submit"},{default:l(()=>[p(R($(G)("components.commonTable.query")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),H("div",Y,[a(L,{data:b.value,columns:K,"row-key":Z,"vertical-align":ee,hover:te,pagination:s.value,loading:_.value,onChange:D},{op:l(o=>[a(B,null,{default:l(()=>[a(z,{theme:"primary",onClick:oe=>V(o.row.id)},{default:l(()=>e[4]||(e[4]=[p(" 开始答题 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","pagination","loading"])])])}}}),re=Q(ae,[["__scopeId","data-v-e35ec5ad"]]);export{re as default};

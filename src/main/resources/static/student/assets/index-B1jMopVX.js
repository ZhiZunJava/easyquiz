import{e as j}from"./examPaper-Cs26uEvk.js";import{d as B,y as A,s as V,r,e as $,j as n,o as g,c as k,a as t,w as l,m as b,F as G,v as H,z as J,M as Q,k as R,_ as W}from"./index-BN_aPgIH.js";import{u as X}from"./enumitem-C4DHP3Rz.js";const Y="id",Z="top",ee=!0,te=B({__name:"index",setup(le){const m=A(),C=X(),I=V(()=>C.exam.examPaper.paperTypeEnum),u=r({subjectId:void 0,singleChoiceCount:5,multipleChoiceCount:5,judgementCount:5,difficulty:3}),i=r({paperType:3}),y=r([]),S=r(0),p=r(!1),h=r(),w=V(()=>m.subjects),E=[{title:"ID",colKey:"id",width:100},{title:"试卷学科名称",colKey:"subjectId",width:150,cell:(a,{row:e})=>m.subjectEnumFormat(w.value,String(e.subjectId))},{title:"试卷标题",colKey:"name",ellipsis:{theme:"light"}},{title:"试卷类型",colKey:"paperType",width:150,cell:(a,{row:e})=>C.enumFormat(I.value,e.paperType)},{title:"试卷分数",colKey:"scoreStr",width:80},{title:"试卷题数",colKey:"questionCount",width:80},{title:"操作时间",colKey:"createTime",width:200},{align:"left",fixed:"right",width:160,colKey:"op",title:"操作"}],K=a=>{const e=J.resolve({path:"/do",query:{id:a}});window.open(e.href,"_blank")},d=r({defaultPageSize:20,total:100,defaultCurrent:1}),P=a=>{var e;(e=a.pagination)!=null&&e.current&&(d.value.defaultCurrent=a.pagination.current,f())},f=async()=>{p.value=!0;try{const a={...i.value,pageIndex:d.value.defaultCurrent,pageSize:d.value.defaultPageSize};Object.keys(a).forEach(e=>{a[e]===""&&(a[e]=null)}),await j.pageList(a).then(e=>{y.value=e.list,S.value=e.total,d.value={...d.value,total:e.total}})}catch(a){console.log(a)}finally{p.value=!1}},T=()=>{Object.keys(i.value).forEach(a=>{i.value[a]===""&&(i.value[a]=null)}),d.value.defaultCurrent=1,f()},U=()=>{j.generate(u.value).then(a=>{T()}).catch(a=>{Q.warning(a.message)})};return $(()=>{m.initSubject(()=>{h.value=w.value}),f()}),(a,e)=>{const F=n("t-option"),q=n("t-select"),c=n("t-form-item"),s=n("t-col"),_=n("t-slider"),z=n("t-rate"),v=n("t-row"),D=n("t-button"),L=n("t-form"),x=n("t-card"),M=n("t-link"),N=n("t-space"),O=n("t-table");return g(),k("div",null,[t(v,{gutter:[12,12]},{default:l(()=>[t(s,{span:3},{default:l(()=>[t(x,{title:"智能训练试卷生成配置",bordered:!1,"header-bordered":""},{default:l(()=>[t(L,{ref:"form",data:i.value,"label-width":80,colon:"",onSubmit:U},{default:l(()=>[t(v,null,{default:l(()=>[t(s,{span:10},{default:l(()=>[t(v,{gutter:[24,24]},{default:l(()=>[t(s,{span:12},{default:l(()=>[t(c,{label:"题目学科",name:"subjectId"},{default:l(()=>[t(q,{modelValue:u.value.subjectId,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value.subjectId=o),class:"form-item-content",placeholder:"请选择题目学科",clearable:""},{default:l(()=>[e[5]||(e[5]=b(" > ")),(g(!0),k(G,null,H(h.value,o=>(g(),R(F,{key:o.id,label:o.name,value:Number(o.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(s,{span:12},{default:l(()=>[t(c,{label:"单选题数量",name:"singleChoiceCount"},{default:l(()=>[t(_,{modelValue:u.value.singleChoiceCount,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value.singleChoiceCount=o),min:0,max:50},null,8,["modelValue"])]),_:1})]),_:1}),t(s,{span:12},{default:l(()=>[t(c,{label:"多选题数量",name:"multipleChoiceCount"},{default:l(()=>[t(_,{modelValue:u.value.multipleChoiceCount,"onUpdate:modelValue":e[2]||(e[2]=o=>u.value.multipleChoiceCount=o),min:0,max:50},null,8,["modelValue"])]),_:1})]),_:1}),t(s,{span:12},{default:l(()=>[t(c,{label:"判断题数量",name:"judgementCount"},{default:l(()=>[t(_,{modelValue:u.value.judgementCount,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value.judgementCount=o),min:0,max:50},null,8,["modelValue"])]),_:1})]),_:1}),t(s,{span:12},{default:l(()=>[t(c,{label:"判断题数量",name:"difficulty"},{default:l(()=>[t(z,{modelValue:u.value.difficulty,"onUpdate:modelValue":e[4]||(e[4]=o=>u.value.difficulty=o),"show-text":"",texts:["入门","简单","中等","困难","专家"]},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(s,{span:12,class:"operation-container"},{default:l(()=>[t(D,{theme:"primary",type:"submit"},{default:l(()=>e[6]||(e[6]=[b(" 生成智能训练试卷 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),t(s,{span:9},{default:l(()=>[t(x,{title:"智能训练试卷列表",bordered:!1,"header-bordered":""},{default:l(()=>[t(O,{data:y.value,columns:E,"row-key":Y,"vertical-align":Z,hover:ee,pagination:d.value,loading:p.value,onChange:P},{op:l(o=>[t(N,null,{default:l(()=>[t(M,{theme:"primary",onClick:ae=>K(o.row.id)},{default:l(()=>e[7]||(e[7]=[b(" 开始答题 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","pagination","loading"])]),_:1})]),_:1})]),_:1})])}}}),se=W(te,[["__scopeId","data-v-6d60e807"]]);export{se as default};

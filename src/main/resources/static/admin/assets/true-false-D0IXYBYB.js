import{d as W,i as X,g as Y,H as Z,v as S,r as w,S as ee,e as te,M as f,j as s,o as d,c as _,a as t,w as a,l as n,m,n as k,F as g,C as b,k as V,_ as le}from"./index-DXJQNOID.js";import{q as C}from"./QuestionShowContent-CnIlYcF9.js";import{u as ae}from"./enumitem-j20-ZoDl.js";import{_ as oe}from"./QuestionShow.vue_vue_type_script_setup_true_lang-DNZVCb38.js";import{b as T}from"./constants-CezdDX0L.js";const se={class:"form-basic-container"},ne={class:"form-basic-item"},ue={class:"form-basic-container-title"},re={style:{display:"flex",width:"100%"}},de={style:{flex:"1"}},ie={class:"form-submit-container"},me={class:"form-submit-sub"},ce={class:"form-submit-left"},pe=W({__name:"true-false",setup(fe){const h=X(),F=Y(),I=Z(),R=ae(),N=S(()=>R.user.levelEnum),U=S(()=>I.subjects),y=w(),v=w(!1),o=w({...T}),z={gradeLevel:[{required:!0,message:"请选择年级",trigger:"change"}],subjectId:[{required:!0,message:"请选择学科",trigger:"change"}],title:[{required:!0,message:"请输入题干",trigger:"blur"}],analyze:[{required:!0,message:"请输入解析",trigger:"blur"}],score:[{required:!0,message:"请输入分数",trigger:"blur"}],correct:[{required:!0,message:"请选择正确答案",trigger:"change"}],difficult:[{required:!0,message:"请选择难度",trigger:"change"}]},c=ee({qType:0,dialog:!1,question:{}}),A=()=>{o.value.subjectId=void 0,y.value=U.value.filter(u=>u.level===o.value.gradeLevel)},B=()=>{c.qType=3,c.dialog=!0,c.question=o.value},M=()=>{o.value={...T},f.success("重置成功")},D=({validateResult:u,firstError:e})=>{e?(console.log("Errors: ",u),f.warning(e)):C.edit(o.value).then(p=>{f.success(o.value.id?"修改成功":"添加成功"),F.push("/question")}).catch(p=>{console.log("Errors: ",p),f.warning(p.message)})};return te(()=>{const{id:u}=h.query;u&&parseInt(u,10)!==0&&(o.value.id=u,v.value=!0,C.select(u).then(e=>{o.value=e,v.value=!1}).catch(e=>{v.value=!1,f.error(e.message)})),I.initSubject(()=>{y.value=U.value})}),(u,e)=>{const p=s("t-tag"),j=s("t-option"),E=s("t-select"),i=s("t-form-item"),r=s("t-col"),q=s("t-input"),H=s("t-input-adornment"),L=s("t-row"),O=s("t-radio"),P=s("t-radio-group"),Q=s("t-input-number"),$=s("t-rate"),x=s("t-button"),G=s("t-form"),J=s("t-loading");return d(),_("div",null,[t(J,{loading:v.value},{default:a(()=>[t(G,{ref:"form",class:"base-form",data:o.value,rules:z,"label-align":"top","label-width":100,onReset:M,onSubmit:D},{default:a(()=>[n("div",se,[n("div",ne,[n("div",ue,[e[8]||(e[8]=n("span",null,"判断题管理",-1)),e[9]||(e[9]=m()),t(p,{theme:"primary"},{default:a(()=>[m(k(o.value.id?"修改":"新增"),1)]),_:1})]),t(L,{class:"row-gap",gutter:[32,24]},{default:a(()=>[t(r,{span:6},{default:a(()=>[t(i,{label:"题目年级",name:"gradeLevel"},{default:a(()=>[t(E,{modelValue:o.value.gradeLevel,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.gradeLevel=l),class:"form-item-content",placeholder:"请选择题目年级",clearable:"",onChange:A},{default:a(()=>[e[10]||(e[10]=m(" > ")),(d(!0),_(g,null,b(N.value,l=>(d(),V(j,{key:l.key,label:l.value,value:l.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(r,{span:6},{default:a(()=>[t(i,{label:"题目学科",name:"subjectId"},{default:a(()=>[t(E,{modelValue:o.value.subjectId,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.subjectId=l),class:"form-item-content",placeholder:"请选择题目学科",clearable:""},{default:a(()=>[e[11]||(e[11]=m(" > ")),(d(!0),_(g,null,b(y.value,l=>(d(),V(j,{key:l.id,label:l.name+" ( "+l.levelName+" )",value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(r,{span:12},{default:a(()=>[t(i,{label:"题目主干",name:"title"},{default:a(()=>[t(q,{modelValue:o.value.title,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.title=l),class:"form-item-content",placeholder:"请输入题目主干"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{span:12},{default:a(()=>[t(i,{"required-mark":""},{label:a(()=>e[12]||(e[12]=[n("span",null,"题目选项",-1)])),default:a(()=>[t(L,{gutter:[8,8],style:{"margin-top":"10px",width:"100%"}},{default:a(()=>[(d(!0),_(g,null,b(o.value.items,l=>(d(),V(r,{key:l.prefix,span:12},{default:a(()=>[n("div",re,[n("div",de,[t(H,{prepend:l.prefix},{default:a(()=>[t(q,{modelValue:l.content,"onUpdate:modelValue":K=>l.content=K,placeholder:"请输入题目选项内容"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prepend"])])])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t(r,{span:12},{default:a(()=>[t(i,{label:"标准答案",name:"correct"},{default:a(()=>[t(P,{modelValue:o.value.correct,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.correct=l)},{default:a(()=>[(d(!0),_(g,null,b(o.value.items,l=>(d(),V(O,{key:l.prefix,value:l.prefix},{default:a(()=>[m(k(l.prefix),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(r,{span:12},{default:a(()=>[t(i,{label:"解析",name:"analyze"},{default:a(()=>[t(q,{modelValue:o.value.analyze,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.analyze=l),class:"form-item-content",placeholder:"请输入解析"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{span:6},{default:a(()=>[t(i,{label:"分数",name:"score"},{default:a(()=>[t(Q,{modelValue:o.value.score,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.score=l),"auto-width":"","decimal-places":1,min:0,class:"form-item-content",placeholder:"请输入分数"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{span:6},{default:a(()=>[t(i,{label:"难度",name:"difficult"},{default:a(()=>[t($,{modelValue:o.value.difficult,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.difficult=l),class:"form-item-content","show-text":"",texts:["入门","简单","中等","困难","专家"]},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),n("div",ie,[n("div",me,[n("div",ce,[t(x,{theme:"primary",class:"form-submit-confirm",type:"submit"},{default:a(()=>[m(k(o.value.id?"修改":"添加")+"题目 ",1)]),_:1}),t(x,{class:"form-submit-confirm",onClick:B},{default:a(()=>e[13]||(e[13]=[m(" 预览题目 ")])),_:1}),t(x,{type:"reset",class:"form-submit-cancel",theme:"default",variant:"base"},{default:a(()=>e[14]||(e[14]=[m(" 重置题目 ")])),_:1})])])])]),_:1},8,["data"]),t(oe,{visible:c.dialog,"onUpdate:visible":e[7]||(e[7]=l=>c.dialog=l),question:c.question,"q-type":c.qType},null,8,["visible","question","q-type"])]),_:1},8,["loading"])])}}}),ye=le(pe,[["__scopeId","data-v-83f20c39"]]);export{ye as default};

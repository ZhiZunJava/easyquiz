import{e as B}from"./examPaperAnswer-n-eSkrym.js";import{d as F,H as L,v as y,r as u,e as O,j as n,o as p,c as g,a,w as o,m,F as z,C as A,n as M,u as U,t as H,l as R,I as G,k as J,_ as Q}from"./index-DXJQNOID.js";import{u as W}from"./enumitem-j20-ZoDl.js";const X={class:"list-common-table"},Y={class:"table-container"},Z="id",ee="top",te=!0,ae=F({__name:"index",setup(oe){const _=L(),f=W(),w=y(()=>f.exam.examPaper.paperTypeEnum),s=u({subjectId:void 0}),v=u([]),C=u(0),i=u(!1),h=u(),x=y(()=>_.subjects),j=[{title:"ID",colKey:"id",width:100},{title:"试卷名称",colKey:"paperName",ellipsis:{theme:"light"}},{title:"试卷类型",colKey:"paperType",width:150,cell:(t,{row:e})=>f.enumFormat(w.value,e.paperType)},{title:"用户名称",colKey:"userName",width:100,ellipsis:{theme:"light"}},{title:"得分",colKey:"userScore",width:80,cell:(t,{row:e})=>`${e.userScore}分/${e.paperScore}分`},{title:"题目对错",colKey:"questionCorrect",width:80,cell:(t,{row:e})=>`${e.questionCorrect}/${e.questionCount}`},{title:"耗时",colKey:"doTime",width:120},{title:"操作时间",colKey:"createTime",width:200},{align:"left",fixed:"right",width:160,colKey:"op",title:"操作"}],S=t=>{const e=G.resolve({path:"/answer/judge",query:{id:t}});window.open(e.href,"_blank")},l=u({defaultPageSize:20,total:100,defaultCurrent:1}),k=t=>{var e;(e=t.pagination)!=null&&e.current&&(l.value.defaultCurrent=t.pagination.current,c())},c=async()=>{i.value=!0;try{const t={...s.value,pageIndex:l.value.defaultCurrent,pageSize:l.value.defaultPageSize};Object.keys(t).forEach(e=>{t[e]===""&&(t[e]=null)}),await B.waitList(t).then(e=>{v.value=e.list,C.value=e.total,l.value={...l.value,total:e.total}})}catch(t){console.log(t)}finally{i.value=!1}},I=()=>{Object.keys(s.value).forEach(t=>{s.value[t]===""&&(s.value[t]=null)}),l.value.defaultCurrent=1,c()},K=()=>{l.value.defaultCurrent=1,c()};return O(()=>{_.initSubject(()=>{h.value=x.value}),c()}),(t,e)=>{const E=n("t-option"),T=n("t-select"),q=n("t-form-item"),d=n("t-col"),b=n("t-row"),N=n("t-button"),D=n("t-form"),V=n("t-link"),P=n("t-space"),$=n("t-table");return p(),g("div",X,[a(D,{ref:"form",data:s.value,"label-width":80,colon:"",onReset:K,onSubmit:I},{default:o(()=>[a(b,null,{default:o(()=>[a(d,{span:10},{default:o(()=>[a(b,{gutter:[24,24]},{default:o(()=>[a(d,{span:4},{default:o(()=>[a(q,{label:"学科",name:"subjectId"},{default:o(()=>[a(T,{modelValue:s.value.subjectId,"onUpdate:modelValue":e[0]||(e[0]=r=>s.value.subjectId=r),class:"form-item-content",placeholder:"请选择学科",clearable:""},{default:o(()=>[e[1]||(e[1]=m(" > ")),(p(!0),g(z,null,A(h.value,r=>(p(),J(E,{key:r.id,label:r.name,value:Number(r.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(d,{span:2,class:"operation-container"},{default:o(()=>[a(N,{theme:"primary",type:"submit"},{default:o(()=>[m(M(U(H)("components.commonTable.query")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),R("div",Y,[a($,{data:v.value,columns:j,"row-key":Z,"vertical-align":ee,hover:te,pagination:l.value,loading:i.value,onChange:k},{op:o(r=>[a(P,null,{default:o(()=>[a(V,{theme:"primary",onClick:ne=>S(r.row.id)},{default:o(()=>e[2]||(e[2]=[m(" 批改试卷 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","pagination","loading"])])])}}}),ue=Q(ae,[["__scopeId","data-v-86def3c0"]]);export{ue as default};

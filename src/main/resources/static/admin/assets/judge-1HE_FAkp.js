import{d as z,i as E,r as p,v as Q,e as U,j as r,o as l,c,l as d,a as t,w as o,m as v,n as _,F as h,C as w,J,I as q,M as L,k as V,p as O,_ as G}from"./index-DXJQNOID.js";import{e as T}from"./examPaperAnswer-n-eSkrym.js";import{u as H}from"./enumitem-j20-ZoDl.js";import{Q as K}from"./QuestionAnswerShow-WUGt2DIG.js";const W={class:"paper-item-order-fake"},X={class:"paper-item-order"},Y={class:"do-exam-time"},Z={class:"time"},ee={class:"paper-question-content"},te={key:0,class:"question-list-box"},se={class:"list-box"},oe={class:"list-qu"},ae={key:0},ne=z({__name:"judge",setup(re){const I=E(),f=p(!1),b=H(),B=Q(()=>b.exam.question.answer.doRightTag),u=p({}),a=p({id:null,score:0,doTime:0,answerItems:[],doRight:!1}),R=s=>b.enumFormat(B.value,s),k=p(null),S=s=>{var m;const e=(m=k.value)==null?void 0:m.querySelector(s);e&&e.scrollIntoView({behavior:"instant",block:"center",inline:"nearest"})},j=()=>{T.edit(a.value).then(s=>{const e=J.alert({header:"考试结果",body:`试卷得分：${s}分`,confirmBtn:"返回考试记录",onConfirm:()=>{q.push("/answer/complete"),e.destroy()},onClose:()=>{q.push("/answer/complete"),e.hide()}})}).catch(s=>{L.warning(s.messgae)})};return U(()=>{const{id:s}=I.query;s&&parseInt(s,10)!==0&&(f.value=!0,T.read(s).then(e=>{u.value=e.paper,a.value=e.answer,f.value=!1}))}),(s,e)=>{const m=r("t-descriptions-item"),F=r("t-descriptions"),g=r("t-divider"),N=r("t-tag"),A=r("t-space"),D=r("t-button"),y=r("t-card"),M=r("t-input-number"),x=r("t-form-item");return l(),c("div",{ref_key:"root",ref:k,class:"do-exam"},[d("div",W,[d("div",X,[t(y,{title:u.value.name,"header-bordered":""},{default:o(()=>[t(F,{size:"small",layout:"vertical"},{default:o(()=>[t(m,{label:"试卷得分"},{default:o(()=>[v(_(a.value.score)+"分 / "+_(u.value.score)+"分",1)]),_:1}),t(m,{label:"考试时间"},{default:o(()=>[v(_(u.value.suggestTime)+"分钟",1)]),_:1})]),_:1}),t(g,{dashed:""}),t(A,{"break-line":"",size:"small"},{default:o(()=>[(l(!0),c(h,null,w(a.value.answerItems,n=>(l(),c("span",{key:n.itemOrder},[t(N,{theme:R(n.doRight),class:"do-exam-title-tag",onClick:C=>S("#question-"+n.itemOrder)},{default:o(()=>[v(_(n.itemOrder),1)]),_:2},1032,["theme","onClick"])]))),128))]),_:1}),t(g,{dashed:""}),d("div",Y,[e[2]||(e[2]=d("div",{class:"title"},"考生消耗时间",-1)),d("div",Z,_(a.value.doTimeStr),1),t(g,{dashed:""}),t(D,{onClick:e[0]||(e[0]=n=>j())},{default:o(()=>e[1]||(e[1]=[v("提交批改")])),_:1})])]),_:1},8,["title"])])]),d("div",ee,[(l(!0),c(h,null,w(u.value.titleItems,(n,C)=>(l(),V(y,{key:C,title:n.name,"header-bordered":""},{default:o(()=>[n.questionItems.length!==0?(l(),c("div",te,[(l(!0),c(h,null,w(n.questionItems,(i,P)=>(l(),V(x,{id:"question-"+i.itemOrder,key:P,style:{"margin-bottom":"0px"}},{default:o(()=>[d("div",se,[d("div",oe,[t(K,{"q-type":i.questionType,question:i,answer:a.value.answerItems[i.itemOrder-1],"q-loading":f.value},{judge:o(()=>[a.value.answerItems[i.itemOrder-1].doRight===null?(l(),c("div",ae,[t(x,{label:"批改："},{default:o(()=>[t(M,{modelValue:a.value.answerItems[i.itemOrder-1].score,"onUpdate:modelValue":$=>a.value.answerItems[i.itemOrder-1].score=$,min:0,"decimal-places":1,max:i.score},null,8,["modelValue","onUpdate:modelValue","max"])]),_:2},1024)])):O("",!0)]),_:2},1032,["q-type","question","answer","q-loading"])])])]),_:2},1032,["id"]))),128))])):O("",!0)]),_:2},1032,["title"]))),128))])],512)}}}),ue=G(ne,[["__scopeId","data-v-fa6abf67"]]);export{ue as default};

import{d as S,i as q,r as u,e as E,j as s,o as L,c as P,a,w as o,m as y,n as g,u as h,t as b,l as T,P as U,_ as j}from"./index-DXJQNOID.js";const k={class:"list-common-table"},z={class:"table-container"},B="id",O="top",M=!0,R=S({__name:"index",setup(W){const w=q(),l=u({userId:null,userName:null}),m=u([]),I=u(0),i=u(!1),C=[{title:"ID",colKey:"id",width:100},{title:"用户ID",colKey:"userId",width:120},{title:"用户名",colKey:"userName",width:150},{title:"姓名",colKey:"realName",width:150},{title:"事件内容",colKey:"content"},{title:"操作时间",colKey:"createTime",width:200}],n=u({defaultPageSize:20,total:100,defaultCurrent:1}),x=e=>{var t;(t=e.pagination)!=null&&t.current&&(n.value.defaultCurrent=e.pagination.current,r())},r=async()=>{i.value=!0;try{const e={...l.value,pageIndex:n.value.defaultCurrent,pageSize:n.value.defaultPageSize};Object.keys(e).forEach(t=>{e[t]===""&&(e[t]=null)}),await U.getUserEventPageList(e).then(t=>{m.value=t.list,I.value=t.total,n.value={...n.value,total:t.total}})}catch(e){console.log(e)}finally{i.value=!1}},N=()=>{Object.keys(l.value).forEach(e=>{l.value[e]===""&&(l.value[e]=null)}),n.value.defaultCurrent=1,r()},V=()=>{n.value.defaultCurrent=1,r()};return E(()=>{const{userId:e}=w.query;e&&(l.value.userId=typeof e=="string"?e:void 0),r()}),(e,t)=>{const p=s("t-input"),f=s("t-form-item"),c=s("t-col"),_=s("t-row"),v=s("t-button"),D=s("t-form"),K=s("t-table");return L(),P("div",k,[a(D,{ref:"form",data:l.value,"label-width":80,colon:"",onReset:V,onSubmit:N},{default:o(()=>[a(_,null,{default:o(()=>[a(c,{span:10},{default:o(()=>[a(_,{gutter:[24,24]},{default:o(()=>[a(c,{span:4},{default:o(()=>[a(f,{label:"用户ID",name:"userId"},{default:o(()=>[a(p,{modelValue:l.value.userId,"onUpdate:modelValue":t[0]||(t[0]=d=>l.value.userId=d),class:"form-item-content",type:"search",placeholder:"用户ID",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1}),a(c,{span:4},{default:o(()=>[a(f,{label:"用户名",name:"userName"},{default:o(()=>[a(p,{modelValue:l.value.userName,"onUpdate:modelValue":t[1]||(t[1]=d=>l.value.userName=d),class:"form-item-content",type:"search",placeholder:"用户名",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(c,{span:2,class:"operation-container"},{default:o(()=>[a(v,{theme:"primary",type:"submit",style:{marginLeft:"var(--td-comp-margin-s)"}},{default:o(()=>[y(g(h(b)("components.commonTable.query")),1)]),_:1}),a(v,{type:"reset",variant:"base",theme:"default"},{default:o(()=>[y(g(h(b)("components.commonTable.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),T("div",z,[a(K,{data:m.value,columns:C,"row-key":B,"vertical-align":O,hover:M,pagination:n.value,loading:i.value,onChange:x},null,8,["data","pagination","loading"])])])}}}),F=j(R,[["__scopeId","data-v-b1af7ce7"]]);export{F as default};
